# Mails are handled by mbsync
set folder = ~/.local/share/mail
set mbox_type = Maildir
set mail_check = 0
# Personal settings
source ~/.config/mutt/personal.rc

# Cache mails
set header_cache = ~/.cache/mutt/headers
set message_cachedir = ~/.cache/mutt/bodies

# colors
source ~/.config/mutt/colors.rc
# key bindings
source ~/.config/mutt/bindings.rc
# GnuPG
source `FILE=~/.config/mutt/gpg.rc; if [ ! -s "$FILE" ]; then FILE=/dev/null;fi;echo "$FILE"`
set pgp_use_gpg_agent

# sorting
set sort = threads
set sort_aux = last-date-received
# smooth scrolling
set menu_scroll
set menu_context = 4
set menu_move_off = no
# preview pane
# set pager_index_lines = 10
set pager_context = 3
set index_format = "%4C %Z %[%b %d %R] %-15.15L (%?l?%4l&%4c?) %s"

set tilde
unset markers

# Its not 1991 anymore, we can use UTF8
set send_charset = "utf-8"

# HTML mails
set mailcap_path = ~/.config/mutt/mailcap
auto_view text/html
alternative_order text/plain text/html

# Contacts
set sort_alias = address
set reverse_alias = yes
set alias_file = "~/.cache/mutt/aliases"
source `FILE=~/.cache/mutt/aliases; if [ ! -s "$FILE" ]; then FILE=/dev/null;fi;echo "$FILE"`
set query_command = "echo ''; sed 's/\\([^ ]* \\)\\{2\\}//' ~/.cache/mutt/aliases | grep -i '%s' | awk '{a=\$NF; \$NF=\"\"; print a\"\t\"\$0}' | sed 's/ $/\\t/'"

# don't bottleneck me with unnecessary messages
set sleep_time = 0
set wait_key = no
set delete = yes
set fast_reply = yes
set include = yes
# f=f, see https://nullprogram.com/blog/2017/06/15/
set text_flowed
# include message in replies
set include
set attach_save_dir = "/tmp"
